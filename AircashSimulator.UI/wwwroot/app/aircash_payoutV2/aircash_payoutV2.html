<h1>Withdrawal</h1>
<br />
<p style="text-align:justify">
    The withdrawal process can be made directly to the Aircash wallet from the Merchant's online channels by selecting
    Aircash as a payout option.
</p>
<ol>
    <li>
        The User selects Aircash as a withdrawal method on the merchant's cashier
    </li>
    <li>
        The user enters his phone number and the amount he wants to withdraw
    </li>
    <li>
        The merchant system sends a request to the Aircash system to validate the user data and to accept the
        withdrawal
    </li>
    <li>
        If the user data is valid and there are no restrictions, the user's account is credited
    </li>
    <li>
        Within the Aircash application, the user selects cash payout and enters the amount
    </li>
    <li>
        The user displays his loyalty card to the cashier at the physical location along with the barcode generated in
        the Aircash application
    </li>
    <li>
        The cashier scans the barcode and confirms the payout
    </li>
    <li>
        The cash is given to the user and his Aircash wallet is deducted
    </li>
</ol>


<p style="text-align:justify">
    The flow consists of the following API requests between the merchant’s system and Aircash
    system:
</p>
<ol>
    <li>
        CheckUser (Merchant -> Aircash)
    </li>
    <li>
        CreatePayout (Merchant -> Aircash)
    </li>
    <li>
        CheckCode (Merchant-> Aircash)
    </li>
    <li>
        Confirm Transaction (Merchant-> Aircash)
    </li>
</ol>

<hr />
<h1>Methods called by the partner system on Aircash system</h1>
<p style="text-align:justify">
    The partner should connect to REST methods that receive JSON objects in order to successfully make payments.
</p>
<h4>CheckUser</h4>
<p style="text-align:justify">
    The method used by partner system to verify whether the user has an active account in Aircash system.
</p>

<table class="table  table-active col-md-6">
    <thead>
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-api.aircash.eu/api/PartnerV4/CheckUser</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td>https://api.aircash.eu/api/PartnerV4/CheckUser</td>
        </tr>
    </tbody>
</table>
<br />
<uib-tabset>
    <uib-tab index="checkUser1-tab-0" heading="Input parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th colspan="2">Parameters</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Mandatory</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">PartnerID</td>
                    <td>String</td>
                    <td>Partner identifier</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">PhoneNumber</td>
                    <td>String</td>
                    <td>
                        Phone number is unique identifier in Aircash system, and can uniquely define Aircash user. Phone number must be in MSISDN format (eg. 3859812345678)
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">PartnerUserID</td>
                    <td>String</td>
                    <td>
                        User identifier in the merchant system.
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">Parameters</td>
                    <td>List&lt;Object&gt;</td>
                    <td>List of parameters</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Key</td>
                    <td>String</td>
                    <td>The name of the parameter to be sent</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Value</td>
                    <td>String</td>
                    <td>The value of the parameter to be sent</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">Signature</td>
                    <td>String</td>
                    <td>
                        Signature generated by the partner system that will be verified by Aircash system before processing request.
                    </td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="checkUser1-tab-1" heading="Input parameters example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkUser.inputParametersExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="checkUser1-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
            <jsonformatter data="aircashC2DPayout.checkUser.inputParametersExample"></jsonformatter>
<pre>

    
Sequence:
Parameters=Key=PayerFirstName&Value=John,Key=PayerLastName&Value=Doe,Key=PayerBirthDate&Value=1990-01-01&PartnerID=496fbe8e-ca5a-42df-8999-cdde0c14ae3a&PartnerUserID=12345&PhoneNumber=385981234567

Signature:
ldzZxeYDQVXuch8EvxDXSXzGx8Yp4E6/UtVj5TgeH++eCAbXKezn1FeeuIHvjDWfdhdx9V92vSVvbbHJzpfC773zoCRmlvmqkIccVyOG2PSznJX2b4MS7bEO2jlgHvhfLku2hDtGSG4nvdSiQ5EZN9pkAAG1JsE4mBAcfD0sb7VHwbelciRbMP+cRqOk38bVX7mZc4fFrURx3Le+6lqtbaISn7QmLYVcbFIIMG1q+4s+qz9eawXpZ8vBBoQqtoAaiObEiD06NZxTPctLabkiZyFGdPw46D05SEJ9reCMxpzCZXZKXFS2pzcjTNUaTAkMen08yhNbb3s2gs2PeRPRXRIwYKAIyromEhXVLbs4lCPRv9IgA2Ejmp1f+0OKdcDOiKk880rjkXZlU9Ym/EqgQrdEnbY+fCeOR4MrQjTLw5zBl3QvRqJIglgl08PimKDCnSIDZw+t96uGXg47uspTWz/Ax2muJR/giLP3/NDDinNV6nqK1aGqNblBSb1hjli8S41Pa7F/amhuUEfGbqjikP4tBOvyFFjOrDSuvRiM3Jp4rNeg0FezFoKFcZ+9R5rZPBR37JUWIQZXMRxVr5lCMCvz0lZdP+JtxBd4eUI4yF4PFGejYksE5yQSpEyXg+6bM928dd+pcFFa9RIJqP3yUSlgqKEdlSOesbGmOkYJSI8=

</pre>
    </uib-tab>
    <uib-tab index="checkUser1-tab-3" heading="Output parameters" classes="nav-item">
        <div class="row">
            <div class="col-md-7">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Parameters</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Status </td>
                            <td>Int</td>
                            <td>
                                1- an uknown phone number<br />
                                2- there is a user, but the personal data is not matched. Transaction will be rejected.<br />
                                3- there is a user, it is possible to make a payment<br />
                                4-User exists but has no verified data.<br />
                                5-User exists but verification is pending.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="checkUser1-tab-4" heading="Output parameters example" classes="nav-item">
        <pre>
    <jsonformatter data="aircashC2DPayout.checkUser.outputParametersExample.first"></jsonformatter>
    or
    <jsonformatter data="aircashC2DPayout.checkUser.outputParametersExample.second"></jsonformatter>
    or
    <jsonformatter data="aircashC2DPayout.checkUser.outputParametersExample.third"></jsonformatter>
    or
    <jsonformatter data="aircashC2DPayout.checkUser.outputParametersExample.forth"></jsonformatter>
    or
    <jsonformatter data="aircashC2DPayout.checkUser.outputParametersExample.fifth"></jsonformatter>
        </pre>
    </uib-tab>
    <uib-tab index="checkUser1-tab-5" heading="Error message" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Http response</th>
                    <th>Description</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>401  </td>
                    <td>
                        In case the partner sends an unknown partner ID or invalid signature Aircash system will return this response
                    </td>
                    <td>
                        Check the parameters that are being sent according to the Aircash system. If they are all according to documentation please contact Aircash support
                    </td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="checkUser1-tab-6" heading="Try it out" classes="nav-item">
        <div class="row">
            <div class="col-md-4">
                <form action="/" method="POST" name="checkUserForm">
                    <fieldset>
                        <div class="mb-3">
                            <label class="form-label">Phone number</label>
                            <input ng-model="checkUserModel.phoneNumber" class="form-control" type="text" ng-init="checkUserModel.phoneNumber='385996734186'" ng-disabled="checkUserServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">First name</label>
                            <input ng-model="checkUserModel.firstName" class="form-control" type="text"  ng-init="checkUserModel.firstName='Matej'" ng-disabled="checkUserServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Last name</label>
                            <input ng-model="checkUserModel.lastName" class="form-control" type="text"  ng-init="checkUserModel.lastName='Zec'" ng-disabled="checkUserServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Birth date</label>
                            <date-picker date="checkUserModel.birthDate" isOptional="false" out="setDate"></date-picker>
                        </div>
                        <button ng-click="checkUser()" class="btn btn-primary w-100px me-5px" ng-disabled="checkUserServiceBusy|| checkUserForm.$invalid">Check user <i ng-if="checkUserServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </fieldset>
                </form>
            </div>
            <div class="col-md-0.5"></div>
            <div class="col-md-4" ng-if="checkUserServiceResponse && !checkUserServiceBusy">
                Request ({{checkUserRequestDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkUserRequest"></jsonformatter>
                Sequence: {{checkUserSequence}}<br />
            </div>
            <div class="col-md-3" ng-if="checkUserServiceResponse && !checkUserServiceBusy">
                Response ({{checkUserResponseDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkUserResponse"></jsonformatter>
            </div>
        </div>
    </uib-tab>
</uib-tabset>


<h4>CreatePayout</h4>
<p style="text-align:justify">
    The method used by partner system to create transaction in Aircash system. On each successful request Aircash system will deposit funds on user account. In case Aircash system returns error to the partner system, partner system should:
    <ul>
        <li>
            in case of known error, the partner system should return money to the user account and display corresponding message to the user
        </li>
        <li>
            in case of unknown error, the partner system should, reserve funds until issue is resolved. Issue can be resolved:
            <ol type="i">
                <li>Manually by the partner support</li>
                <li>Automatically, by using CheckTransactionStatus method in Aircash system</li>
            </ol>
        </li>
    </ul>
</p>

<table class="table  table-active col-md-6">
    <thead>
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
    <thead>
    <tbody>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-api.aircash.eu/api/PartnerV4/CreatePayout</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td>https://api.aircash.eu/api/PartnerV4/CreatePayout</td>
        </tr>
    </tbody>
</table>
<br />
<uib-tabset>
    <uib-tab index="createPayout1-tab-0" heading="Request parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th colspan="2">Parameters</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Mandatory</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">PartnerID</td>
                    <td>String</td>
                    <td>Partner identifier</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">PartnerTransactionID</td>
                    <td>String</td>
                    <td>
                        Transaction ID in the partner system
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">Amount</td>
                    <td>Decimal</td>
                    <td>
                        Transaction amount
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">PhoneNumber</td>
                    <td>String</td>
                    <td>
                        Phone number is unique identifier in Aircash system, and can uniquely define Aircash user. Phone number must be in MSISDN format. Eg. 3859812345678 (State Number 385, number of operators 98, number of users 1234567)
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">PartnerUserID</td>
                    <td>String</td>
                    <td>
                        User identifier in the merchant system.
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">Parameters</td>
                    <td>List&lt;Object&gt;</td>
                    <td>List of parameters</td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Key</td>
                    <td>String</td>
                    <td>The name of the parameter to be sent</td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Value</td>
                    <td>String</td>
                    <td>The value of the parameter to be sent</td>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="2">CurrencyID</td>
                    <td>Int</td>
                    <td>
                        ISO 4217 code of the currency the payout will be made in
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td colspan="2">Signature</td>
                    <td>String</td>
                    <td>
                        Signature generated by the partner system that will be verified by Aircash system before processing request.
                    </td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="createPayout1-tab-1" heading="Request parameters example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.createPayout.requestExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="createPayout1-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
            <jsonformatter data="aircashC2DPayout.createPayout.requestExample"></jsonformatter>
<pre>

Sequence:
Amount=100&CurrencyId=EUR&Parameters=Key=email&Value=user@example.net,Key=PayerFirstName&Value=John,Key=PayerLastName&Value=Doe,Key=PayerBirthDate&Value=1990-01-01,Key=PayerBirthDate&Value=1990-01-01,Key=LocationID&Value=123&PartnerID=1b8a6445-d23c-4a3a-acc0-f05abcebb081&PartnerTransactionID=4b4cc84f-445d-4e61-82e4-0a1db3f6b88c&PartnerUserID=12345&PhoneNumber=385981234567

Signature:
PZVGM4QwYw1QhcOUXF8JW5H2JMYVRgxqaXh5NL6Fn3AA9/+9km/7xS5lXSW65AGVxbx8do0M5GHxJ9d7ksdRyxZtr9aGCC5fAdGBG19zuFagtgK85AJG83JJadiPRSy3lEPeZWRUGKea7Q3HFntACjPfDznOWz4XppzIaNRIQtJqr9rCMORfKbM9STC/tYC4qjCRlsxGpEpJXPuwy9RRYh5/5Y2ox4d0E+WRYRTFVAkWr6E0yNkZKatUlhGAVBZE4FWOo+yrdJX5dncrl3E7J9NGopAt07LGArUvHs3lAczlxi1ohE4FF4P7WOCh+oQrkNVaC4b01UHJxs04xI38Bncza2zxi8SZPyAigzMumYQROhSiOArsRhU+jlh86A6zch88LnvAGgh0/ILtZZF2FJSbZNZbzzSa85L9eqRO9jDv+wvlkEKnxFTKrDr2FlX5PcuGqXm2WkRj1/WtAdazvnNFE9hDiq/P9sODkRQKi5KlF2Tf3Zs+rumSAMW+9VwVPRoA4MeqMNMn1z/fMG1l0rHmqvh3Kvem5obljDUyvbd4r4hCi5Y0gfg0N5SDzIWirk4JdAl8PkMfJLN4KJeBYaeV9ctrqlLxNBtijezUi0KQ/sEiVPIS/JKhrFbjYa7+pjmlUHR+hfPjAB6WmuECU8T7LFAMtapb7vM1dvXzkek=

</pre>
    </uib-tab>
    <uib-tab index="createPayout1-tab-3" heading="Response parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameters</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Mandatory</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>AircashTransationID</td>
                    <td>String</td>
                    <td>Transaction ID from Aircash system. Returns only in case of successful payment.</td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="createPayout1-tab-4" heading="Response parameters example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.createPayout.responseExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="createPayout1-tab-5" heading="Error message" classes="nav-item">
        <div class="row">
            <div class="col-md-12">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Http response</th>
                            <th>Description</th>
                            <th>Solution</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>401</td>
                            <td>
                                In case the partner sends an unknown partner ID or invalid signature Aircash system will return this response
                            </td>
                            <td>
                                Verify that PartnerID and Signature are correct in your request. If they are all according to documentation please contact Aircash support
                            </td>
                        </tr>
                        <tr>
                            <td>400</td>
                            <td>Aircash system returns in this case a response containing the error code with error info that the partner system can send corresponding message to the partner.</td>
                            <td>
                                4000 - unknown phone number - warn user that user with inputted number doesn't exist in Aircash system<br />
                                4001 - user with phone number exists in Aircash system but doesn’t have correct PersonalID. This error can occur only in case the partner send personalID in request<br />
                                4002 - transaction with PartnerTransactionID already exists<br />
                                4003 - amount is below limit<br />
                                4004 - amount is over limit<br />
                                4005 - user is blocked or user has reached limit<br />
                                4006 - currencies do not match<br />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </uib-tab>
    <uib-tab index="createPayout1-tab-6" heading="Try it out" classes="nav-item">
        <div class="row">
            <div class="col-md-4">
                <form action="/" method="POST" name="transactionForm1">
                    <fieldset>
                        <div class="mb-3">
                            <label class="form-label">Phone number</label>
                            <input ng-model="createPayoutModel.phoneNumber" class="form-control" type="text" placeholder="Enter phone number" ng-disabled="createPayoutServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input ng-model="createPayoutModel.email" class="form-control" type="email" placeholder="Enter email" ng-disabled="createPayoutServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">First name</label>
                            <input ng-model="createPayoutModel.firstName" class="form-control" type="text" placeholder="Enter username" ng-disabled="createPayoutServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Last name</label>
                            <input ng-model="createPayoutModel.lastName" class="form-control" type="text" placeholder="Enter username" ng-disabled="createPayoutServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Amount</label>
                            <input ng-model="createPayoutModel.amount" class="form-control" type="text" placeholder="Enter amount" ng-disabled="createPayoutServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Birth date</label>
                            <date-picker date="createPayoutModel.birthDate" isOptional="false" out="setBirthDatePayout"></date-picker>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="exampleInputEmail1">Location ID</label>
                            <input ng-model="createPayoutModel.locationID" class="form-control" type="text" ng-disabled="createPayoutServiceBusy" ng-required="true" placeholder="Enter location ID">
                        </div>
                        <button ng-click="createPayout()" class="btn btn-primary w-100px me-5px" ng-disabled="createPayoutServiceBusy || transactionForm1.$invalid">Create payout <i ng-if="createPayoutServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </fieldset>
                </form>
            </div>
            <div class="col-md-0.5"></div>
            <div class="col-md-4" ng-if="createPayoutServiceResponse && !createPayoutServiceBusy">
                Request ({{createPayoutRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="createPayoutRequest"></jsonformatter>
            </div>
            <div class="col-md-3" ng-if="createPayoutServiceResponse && !createPayoutServiceBusy">
                Response ({{createPayoutResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="createPayoutResponse"></jsonformatter>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-0.5"></div>
            <div class="col-md-7" ng-if="createPayoutServiceResponse && !createPayoutServiceBusy"><pre>Sequence: {{createPayoutSequence}}<br /></pre></div>
        </div>
    </uib-tab>
</uib-tabset>



<h4>CheckCode</h4>
<p>
    The method used by the partner system to check is there a valid transaction in the Aircash system for the given
    barcode. By calling this method, the Merchant system will get information about the prepared transaction (amount,
    currency, and personal data). The transaction will not be processed until the next request (Confirm transaction). <br />
</p>

<table class="table  table-active col-md-6">
    <thead>
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-api.aircash.eu/v2/api/SalesPartnerV2/CheckCode</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td></td>
        </tr>
    </tbody>
</table>

<uib-tabset>
    <uib-tab index="CheckCode-tab-0" heading="Request parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>PartnerID</b></td>
                    <td>String</td>
                    <td>Partner identifier</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>BarCode</b></td>
                    <td>String</td>
                    <td>User’s scanned barcode</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>LocationID</b></td>
                    <td>String</td>
                    <td>Sales partner location identifier</td>
                    <td>NO</td>
                </tr>
                <tr>
                    <td><b>Signature</b></td>
                    <td>String</td>
                    <td>
                        Signature to confirm that the partner is indeed making the request. Data  to sign: BarCode={0}&LocationID={1}&PartnerID={2}
                    </td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="CheckCode-tab-1" heading="Request example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkCode.requestExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="CheckCode-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
            <jsonformatter data="aircashC2DPayout.checkCode.requestExample"></jsonformatter>
<pre>
Sequence:
BarCode=05cd4905-982b-4a36-8634-0719290e4341&LocationID=123&PartnerID=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf

Signature:
QDyIrReELij2SvuZFrhpSsrDsDpHhD3XEm/x64cNy2fwiIiOHcIVl7uVf6A4sbPPi/pVj2hw26sTAloBMJiFZc9eMrSqmlAP0XxHMmn6OHp+pr9G9jFZZ0bM6AxA1BduGYmIDPl9rGMhNXXUU6RQbWvmDD6N3Digcwf2Vr7qHzNow6rDCXpWCXJXQCXJvF86HTaF5pF/kS/R13PtIl7zn3lcvSTgWguy8DM0zwkumSzrclpo98xv/YIn3irgTiLYDD8Dz2Bh1gIOeEF+XN7OvyPGC/3JQf/P6D10Y4GNaFXHjAoCrPPBD91a8kbdYiirqjMOxiBsE4SpK7GsGsp9258TfggAhFYXF7i/B4beuNilZXzMvWY28iy28b5J/mSfEDSfMRF3EWIK5mkgoN634fjkboRB1UNW69FsZmHr3gpN807uP+o9zGrVEi0yFLua7qnbBWLfQfwvnQMHFebBUGcXqNIIjQ1ksqs17Hxxosr3GrxqHXx8EkJysp679wdAs7AmY2Z/HbhbPO1JufCluMeqYrVz3ue3F6Kru5Nw+tLuZCuJJ7YsEgHKC5QhCao40CKbceAj3BFFlq5rP6nHg8wkfFq14oSsnAZK8/W109x8GN1z9fhxzhbZKfVL7v+IigmOPGcBaAsf9Bmpo8uEAP2HcdzecWQ0xWUw/M2N4tc=
</pre>
    </uib-tab>
    <uib-tab index="CheckCode-tab-3" heading="Response parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>BarCode</b></td>
                    <td>String</td>
                    <td>Barcode that was sent in the request</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>Amount</b></td>
                    <td>Number</td>
                    <td>
                        A positive amount represents payment (cashier takes the money from the user), and a negative amount represents payout (cashier hands the money to the user)
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>CurrencyID</b></td>
                    <td>Integer</td>
                    <td>
                        Currency ISO code
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>FirstName</b></td>
                    <td>String</td>
                    <td>
                        Aircash user first name
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>LastName</b></td>
                    <td>String</td>
                    <td>
                        Aircash user last name
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>DateOfBirth</b></td>
                    <td>DateTime</td>
                    <td>
                        Aircash user date of birth
                    </td>
                    <td>YES</td>
                </tr>

        </table>
    </uib-tab>
    <uib-tab index="CheckCode-tab-4" heading="Response example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkCode.responseExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="CheckCode-tab-5" heading="Error responses" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Http response</th>
                    <th>Description</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>401</b></td>
                    <td>
                        The partner is sending an unknown partner ID, or the signature is not valid.
                    </td>
                    <td>
                        Check all of the parameters that are being sent. If all parameters look good, contact Aircash support.
                    </td>
                </tr>
                <tr>
                    <td><b>400</b></td>
                    <td>
                        A list of errors that can occur can be found at the end of this chapter in Error codes
                    </td>
                    <td>
                        Depends on the error as described in Error codes chapter.
                    </td>
                </tr>
                <tr>
                    <td><b>500</b></td>
                    <td>
                        Unexpected system error
                    </td>
                    <td>
                        Try again until the system recovers.
                    </td>
                </tr>
        </table>
    </uib-tab>
    <uib-tab index="CheckCode-tab-6" heading="Try it out" classes="nav-item" style="display: none;">
        <div class="row">
            <div class="col-md-4">
                <form action="/" method="POST" name="transactionForm">
                    <fieldset>
                        <div class="mb-3">
                            <label class="form-label">BarCode</label>
                            <input ng-model="checkCodeModel.barCode" class="form-control" type="text" placeholder="Enter BarCode" ng-disabled="checkCodeServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">LocationID</label>
                            <input ng-model="checkCodeModel.locationID" class="form-control" type="text" placeholder="Enter LocationID" ng-disabled="checkCodeServiceBusy" ng-required="true">
                        </div>
                        <button ng-click="checkCode()" class="btn btn-primary w-100px me-5px" ng-disabled="checkCodeServiceBusy || transactionForm.$invalid">Check <i ng-if="checkCodeServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </fieldset>
                </form>
            </div>
            <div class="col-md-4" ng-if="checkCodeServiceResponse">
                Request ({{checkCodeRequestDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkCodeServiceRequest"></jsonformatter>
                Sequence: {{checkCodeSequence}}<br />
            </div>
            <div class="col-md-4" ng-if="checkCodeServiceResponse">
                Response ({{checkCodeResponseDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkCodeServiceResponse"></jsonformatter>
            </div>
        </div>
    </uib-tab>
</uib-tabset>

<h4>ConfirmTransaction</h4>

<p>
    The method used by the partner system to confirm the transaction for which the barcode is previously scanned.<br />
</p>

<table class="table  table-active col-md-6">
    <thead>
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-api.aircash.eu/api/SalesPartner/ConfirmTransaction</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td>https://api.aircash.eu/api/SalesPartner/ConfirmTransaction</td>
        </tr>
    </tbody>
</table>

<uib-tabset>
    <uib-tab index="ConfirmTransaction-tab-0" heading="Request parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>PartnerID</b></td>
                    <td>String</td>
                    <td>Partner identifier</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>BarCode</b></td>
                    <td>String</td>
                    <td>User’s scanned barcode</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>PartnerTransactionID</b></td>
                    <td>String</td>
                    <td>
                        Partner’s unique identifier of the transaction
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>LocationID</b></td>
                    <td>String</td>
                    <td>
                        Sales partner location identifier, in case the partner wants to have reports per location, a unique location identifier should be sent for each location. If the partner wants the reports per something else, e.g. the user, he can send the user identifier etc.
                    </td>
                    <td>NO</td>
                </tr>
                <tr>
                    <td><b>Signature</b></td>
                    <td>String</td>
                    <td>
                        Signature to confirm that the partner is indeed making the request. Data to sign is BarCode={0}&LocationID={1}&PartnerID={2}&PartnerTransactionID={3}
                    </td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="ConfirmTransaction-tab-1" heading="Request example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.confirmTransaction.requestExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="CheckCode-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
            <jsonformatter data="aircashC2DPayout.confirmTransaction.requestExample"></jsonformatter>
<pre>
Sequence:
BarCode=05cd4905-982b-4a36-8634-0719290e4341&LocationID=123&PartnerID=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionID=11888f0c-7923-42db-8513-5c1f32cc83e0

Signature:
Iz+gMcrdNAsTMeRleQ9fcqrX61V6VZMt7GWeZ0VS3rxV6NL9WduPHV44mVMKKxqhaYwLhqXYVIERoUVIdS46h8vFaCJrykurUrTG/SZ8FCuI+zC00Tvgai1Kic6G7s+rLKJcFpmOT8qy2XjEunoWgiyFu3qUZtJHfjWKFJnXwTE7KIei5G6eaN9up9o3Wx3V2bb5lgbc6/m/+HYWIQPpeWXzOjOAB9Z0QYhLazJnYh7gBLqLp9M5+Rd714tncLpIheMSiCy2Z3lq44IvPgFjko+CIK9eXV878fUTeuMc/muFp6iSUk9p4CHq9cZF/sKSEpGZ6AkzkNHQj0jr3FM4wdtQ+A14cjcdVJq8tIHn6Y5lwkYNG3LI/8W378lGsW9J3qsVDgWautEwDOiONWoSpIoSZc4A66kfBpdn611tkpoYtflp4WbL+FMUZ8xlOc41/0gjv83tNYiTBbQ87iKvqQMEfw31GKRgmvZs1GW3QsN99yRpguHedn3fXvzn2o57AhmIUstwrVOZwJDBIGEzJ5/Pg/FELb7HmTV+sMXTtTzcho/ibOzmb1mokuIDXD4t6gAaxjfVjSqpQ3slQpI8WNAhRaUvIK2MBoUxXzs4F+Pif0IbdRxZTL+TUEKAP08wBJ43AOMOo8/LsOIQBCLpNAJ9tTgxsiy6AhEDst/cVAw=    
</pre>
    </uib-tab>
    <uib-tab index="ConfirmTransaction-tab-3" heading="Response parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>BarCode</b></td>
                    <td>String</td>
                    <td>Barcode that was sent in the request</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>Amount</b></td>
                    <td>Number</td>
                    <td>
                        A positive amount represents payment (cashier takes the money from the user), and a negative amount represents payout (cashier hands the money to the user)
                    </td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>AircashTransactionID</b></td>
                    <td>String</td>
                    <td>
                        Aircash system’s unique identifier of the transaction
                    </td>
                    <td>YES</td>
                </tr>
        </table>
    </uib-tab>
    <uib-tab index="ConfirmTransaction-tab-4" heading="Response example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.confirmTransaction.responseExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="ConfirmTransaction-tab-5" heading="Error responses" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Http response</th>
                    <th>Description</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>401</b></td>
                    <td>
                        The partner is sending an unknown partner ID, or the signature is not valid.
                    </td>
                    <td>
                        Check all of the parameters that are being sent. If all parameters look good, contact Aircash support.
                    </td>
                </tr>
                <tr>
                    <td><b>400</b></td>
                    <td>
                        A list of errors that can occur can be found at the end of this chapter in Error codes
                    </td>
                    <td>
                        Depends on the error as described in Error codes chapter.
                    </td>
                </tr>
                <tr>
                    <td><b>500</b></td>
                    <td>
                        Unexpected system error
                    </td>
                    <td>
                        Try again until the system recovers.
                    </td>
                </tr>
        </table>
        <p>
            Corner cases<br />
            In case of Aircash system not returning a response to a ConfirmTransaction call, or
            responding with an error 500, the sales partner system should check the transaction status in
            Aircash system by calling the CheckTransactionStatus method.
        </p>
    </uib-tab>
    <uib-tab index="ConfirmTransaction-tab-6" heading="Try it out" classes="nav-item" style="display: none;">
        <div class="row">
            <div class="col-md-4">
                <form action="/" method="POST" name="transactionForm1">
                    <fieldset>
                        <div class="mb-3">
                            <label class="form-label">BarCode</label>
                            <input ng-model="confirmTransactionModel.barCode" class="form-control" type="text" placeholder="Enter BarCode" ng-disabled="confirmTransactionServiceBusy" ng-required="true">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">LocationID</label>
                            <input ng-model="confirmTransactionModel.locationID" class="form-control" type="text" placeholder="Enter LocationID" ng-disabled="confirmTransactionServiceBusy">
                        </div>
                        <button ng-click="confirmTransaction()" class="btn btn-primary w-100px me-5px" ng-disabled="confirmTransactionServiceBusy || transactionForm1.$invalid">Confirm <i ng-if="confirmTransactionServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </fieldset>
                </form>
            </div>
            <div class="col-md-4" ng-if="confirmTransactionServiceResponse">
                Request ({{confirmTransactionRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="confirmTransactionServiceRequest"></jsonformatter>
                Sequence: {{confirmTransactionSequence}}<br />
            </div>
            <div class="col-md-4" ng-if="confirmTransactionServiceResponse">
                Response ({{confirmTransactionResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="confirmTransactionServiceResponse"></jsonformatter>
            </div>
        </div>
    </uib-tab>
</uib-tabset>

<h4>CheckTransactionStatus</h4>
<p style="text-align:justify">
    The method used by partner system to check individual transaction status in Aircash system. Aircash recommend using CheckTransactionStatus method in cases when an unknown error occurs on CreatePayout method. With CheckTransactionStatus, the partner system will be able to automatically resolve all unknown errors from Aircash system<br />
</p>

<table class="table  table-active col-md-6">
    <thead>
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-api.aircash.eu/api/PartnerV2/CheckTransactionStatus</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td>https://api.aircash.eu/api/PartnerV2/CheckTransactionStatus</td>
        </tr>
    </tbody>
</table>
<br />
<uib-tabset>
    <uib-tab index="CheckTransactionStatus-tab-0" heading="Request parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameters</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Mandatory</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>PartnerId</b></td>
                    <td>String</td>
                    <td>Partner identifier</td>
                    <td>YES</td>
                </tr>
                <tr>
                    <td><b>PartnerTransactionID</b></td>
                    <td>String</td>
                    <td>
                        Transaction ID in the partner system
                    </td>
                    <td>
                        YES, in case AircashTransactionID wasn't sent
                    </td>
                </tr>
                <tr>
                    <td><b>AircashTransactionID</b></td>
                    <td>String</td>
                    <td>
                        Transaction ID from Aircash system.
                    </td>
                    <td>
                        YES, in case PartnerTransactionID wasn't sent
                    </td>
                </tr>
                <tr>
                    <td><b>Signature</b></td>
                    <td>String</td>
                    <td>
                        Signature generated by the partner system that will be verified by Aircash system before processing request.
                    </td>
                    <td>YES</td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-1" heading="Request example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkTransactionStatus.requestExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="createPayout1-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
            <jsonformatter data="aircashC2DPayout.checkTransactionStatus.requestExample"></jsonformatter>
<pre>
Sequence:
AircashTransactionID=&PartnerID=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionID=45c38393-274b-4761-902e-23db30736563

Signature:
BBjas91N8Br79SsxRyZrGu3toCa0ji7VrY52Px6t3TWposfCh8m95Slb35Z8A6m6krOeC8zS7EkdbkIHJAicIKVM4WK59hnNk+HCQ9X/xzeDyDK8DD7s9Md1AKiKY6AMNIig+X5vygtnAxVkda4Zyvh9gspJXOzap6RppervGNbzGXhynWpiybHzmkUnhCt0oeq3kONgZdkwwr8GjDhp7vRPGW4Hp12akGb7XQ1m+dqzsESzO2rtuQPHz0yoYrr75ckQguLAuh983uez1LcMQ75Pl/R6liPjuAddtELBtsjZikYf1Yy5wMpc01VCWgKd1vsbZ6AQsUybdbqURJlTYguS/g8rAxlB+x0HZ9eopoePhuEX117VI1KHIPeob3hraGMF2hHCih5wzCiEpS7Otye7gh41bgAjh6QfqNnIlXsnwZJwJMJcAmmHvW7aWH1JJ4G3WVyLGuF1GRkcWY30yuDW0L3GbBe1gJN0obuanlZTuI5VoWpyzS7VWbz7vvj/yZgYdZWBhvml5rccbEiZzJ+7hHcGK4DzTP94kbRyh+TSnLi/k69GSYX2lFFHwPYXJ2gpbUmhBpeP/PJD8oZ+yu3xWBsYah8Hol5yeFBErqkP/fNAQHXy5zu+dp6KXic4yl9TJSZ8eR5SOMRaVbtcuIokorHUVF8Q4FXKrmr5dKU=
    </pre>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-3" heading="Response parameters" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Parameters</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>Status</b></td>
                    <td>Int</td>
                    <td>
                        2 - The transaction exist in Aircash system<br />
                        0 - The transaction doesn’t exist in Aircash system
                        and the partner can cancel the transaction in the
                        partner system

                    </td>
                </tr>
                <tr>
                    <td><b>AircashTransactionID</b></td>
                    <td>String</td>
                    <td>
                        Transaction ID in the Aircash system. It is returned only in case of successful payment (all statuses except status 0)
                    </td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-4" heading="200 OK Response example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkTransactionStatus.responseExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-5" heading="Error response messages" classes="nav-item">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Http response</th>
                    <th>Description</th>
                    <th>Error Code</th>
                    <th>Message</th>
                    <th>Aditional data</th>
                    <th>Solution</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>400</b></td>
                    <td>An invalid request was made.</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>
                        Contact Aircash support
                    </td>
                </tr>
                <tr>
                    <td><b>401</b></td>
                    <td>In case the partner sends an unknown partner ID or invalid signature Aircash system will return this response</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>
                        Check the parameters that are being sent according to the Aircash system. If they are all according to documentation please contact Aircash support
                    </td>
                </tr>
                <tr>
                    <td><b>500</b></td>
                    <td>An unknown error occured</td>
                    <td>-</td>
                    <td>An error has occurred.</td>
                    <td>-</td>
                    <td>
                        Contact Aircash support
                    </td>
                </tr>
            </tbody>
        </table>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-6" heading="Error response example" classes="nav-item">
        <jsonformatter data="aircashC2DPayout.checkTransactionStatus.errorResponseExample"></jsonformatter>
    </uib-tab>
    <uib-tab index="CheckTransactionStatus-tab-7" heading="Try it out" classes="nav-item" style="display: none;">
        <div class="row">
            <div class="col-md-4">
                <br />
                <p>Recent transactions:</p>
                <div>
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Transaction ID</th>
                                    <th>Amount</th>
                                    <th>Check</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-if="totalLoaded == 0 && !busy">
                                    <td colspan="12" align="center">
                                        <i>No data</i>
                                    </td>
                                </tr>
                                <tr ng-repeat="transaction in transactions">
                                    <td>{{$index + 1}}.</td>
                                    <td>{{transaction.transactionId}}</td>
                                    <td>{{transaction.amount | number:2}}</td>
                                    <td style="text-align: center; vertical-align: inherit">
                                        <button class="btn btn-primary fa fa-check" ng-click="checkTransactionStatus(transaction.transactionId)"></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <load-more total-loaded="totalLoaded" out="loadMore"></load-more>
                </div>
            </div>
            <div class="col-md-0.5"></div>
            <div class="col-md-4" ng-if="checkTransactionStatusServiceResponse">
                Request ({{checkTransactionStatusRequestDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkTransactionStatusRequest"></jsonformatter>
                Sequence: {{checkTransactionStatusSequence}}<br />
            </div>
            <div class="col-md-3" ng-if="checkTransactionStatusServiceResponse">
                Response ({{checkTransactionStatusResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                <jsonformatter data="checkTransactionStatusResponse"></jsonformatter>
            </div>
        </div>
    </uib-tab>
</uib-tabset>
