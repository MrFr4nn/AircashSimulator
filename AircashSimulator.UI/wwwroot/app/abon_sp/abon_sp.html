<h1 style="text-align:justify">Intro</h1>
<br />
<p style="text-align:justify">
    Aircash Abon platform is intended for users that wish to make payments to their Online Provider accounts (betting sites, parking services, GSM topups etc.) via paper coupons that can be bought at cash registers, i.e. points of sale of Aircash Sales Partners (kiosks, gas stations, etc.). The process of using Aircash Abon can be observed from two perspectives: Sales Partner and Online Provider.
    <br /> <br />
    From the Sale Partner's perspective: the user comes to the cash register at a Sale Partner point of sale and asks to buy an Aircash Abon coupon a specific value. The cash register system then contacts the Aircash backend system which then creates a coupon of the desired value. After that, the user pays for that amount, and the cash register prints out an Aircash Abon coupon which is then given to the user.
    <br /> <br />
    From the Online Provider's perspective: the user logs in to a website or a mobile app of an Online Provider (e.g. a booking site), and chooses to deposit money via an Aircash Abon coupon. He enters the 16-digit code from the coupon he bought, and confirms the transaction of funds to an Online Provider account. The funds are deposited to the user's online account, and the coupon gets expended and can no longer be used.
    <br /> <br />
    An example of an Aircash Abon is shown  <a href="" ng-click="showCoupon()">here</a>.
</p>

<hr />
<h1 style="text-align:justify">Technical integration aspects – security and authentication</h1>
<p>
    Aircash Abon system exposes a REST web API.
    <br /> <br />
    The API is accessed via HTTPS protocol (secured by a TLS certificate). Optionally, we can ensure access to the API through a VPN.
    <br /> <br />
    Each request towards Aircash Abon API has to be digitally signed. This ensures non-repudiation of every request, as well as authentication.
    <br /> <br />
    Each method has a special PartnerId parameter. This is a GUID type parameter that's also generated by the Aircash team and delivered to each Sales Partner separately.
    <br /> <br />
    Only a pair of properly signed control sequences and a correct PartnerId can enable authentication to the system.
    <br /> <br />
    The partners are provided with an integration environment (staging) where it is possible to test all of the methods for integration. All the integration details of the Abon services are described in detail in the following chapters.
</p>
<hr />
<h1 style="text-align:justify">Sales Partner API</h1>
<br />
<h4 style="text-align:justify">Coupon creation</h4>
<p style="text-align:justify">
    The method used to let the sales partner request a new Aircash Abon. Aircash Abon is created using the CreateCoupon method that creates the coupon and immediately activates it.
</p>

<div class="table-responsive">
    <table class="table table-active col-md-6">
        <tr>
            <th>Environment</th>
            <th>Method</th>
            <th>URL</th>
        </tr>
        <tr>
            <td><b>Test</b></td>
            <td>
                POST
            </td>
            <td>https://staging-a-bon.aircash.eu/rest/api/CashRegister/CreateCoupon</td>
        </tr>
        <tr>
            <td><b>Production</b></td>
            <td>
                POST
            </td>
            <td>https://a-bon.aircash.eu/rest/api/CashRegister/CreateCoupon</td>
    </table>
</div>
<br />
<div class="row">
    <div class="col-md-12">
        <uib-tabset>
            <uib-tab index="request-tab-0" heading="Request parameters" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Parameters</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Mandatory</th>
                                <th>Part of the sequence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><b>PartnerId</b></td>
                                <td>string</td>
                                <td>Unique partner identifier (per currency) provided by Aircash</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>Value</b></td>
                                <td>decimal</td>
                                <td>Coupon value</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>PointOfSaleId</b></td>
                                <td>string</td>
                                <td>Identifier of the point of sale</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>ISOCurrencySymbol</b></td>
                                <td>string</td>
                                <td>Currency code by ISO 4217 (e.g. for EUR)</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>PartnerTransactionId</b></td>
                                <td>string</td>
                                <td>Identifier of the transaction in partner's system</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>ContentType</b></td>
                                <td>string</td>
                                <td>
                                    Coupon format – „pdf“, „txt“ or „xml“. If the parameter is invalid or missing, default partner settings are used
                                </td>
                                <td>NO</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>ContentWidth</b></td>
                                <td>int</td>
                                <td>
                                    Width of the coupon (in mm for pdf, or character number for txt) Minimal value is 20. If the parameter is invalid or missing, default partner settings are used
                                </td>
                                <td>NO</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>Email</b></td>
                                <td>string</td>
                                <td>
                                    User email address
                                </td>
                                <td>NO</td>
                                <td>NO</td>
                            </tr>
                            <tr>
                                <td><b>Signature</b></td>
                                <td>string</td>
                                <td>
                                    Sequence that has been digitally signed with the provider's private signature, used for authentication
                                </td>
                                <td>YES</td>
                                <td>NO</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request-tab-1" heading="Request example" classes="nav-item">
                <jsonformatter data="aBonGenerate.couponCreation.requestExample"></jsonformatter>
            </uib-tab>
            <uib-tab index="request-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
                <jsonformatter data="aBonGenerate.couponCreation.requestExample"></jsonformatter>
<pre>
Sequence:
ContentType=&ContentWidth=&ISOCurrencySymbol=HRK&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=76b266ae-4d61-414b-baa9-44f9da1182e1&PointOfSaleId=test&Value=100

Signature:
eqWplW0MZ/LGKYbif6yKN0bD+fi18d1OOUPqJy1lq08/EsQeEuAF+CAhQAskfA5UzsnHOp4qr54mreGJm2H4LNDkHKyAoiN2YcTISP7eWBXszjsNQKOfG8JoFmFFQOOHy1TUr0G4Fb2hz5OIh+cE3XYNnP0T9OEdxRidNKpvz0XMm6WsJxFnOnVWY0Xi6Hf1gyw8556D1/SOP61THvOnS+iCdDfx0MGPi22CMpAyz020eD8fZ11A0FdC9MHmz/G0LDsf7AALFf7dkgHhO7peTlI1ik8rSJzfifnxsnTmovUBUmU8/2E5CmWHOzmgIg/JVrcTKBXQen+gXcIPuwuQxUnyCM+8dLcxmqORLwVqjP0X3csVLTQ1Gwom+NXUBt2IVyct0PtN/s414IlbbXHNvGhE+0Vc4du2ofI+qyrdMzWKTGIWHi7qyVnqi3WLJcbvCY4hLGmH7fW4knx0kprclssKRhpVEWU4y8iB/f/VeA6LWUUUZtuU2KSCL+/68HyhMttk1whx74RbhrF54vrgLojxaNxlmkbw5FPWL/kMAfdF1IwtlxTRHuwqtvJba3VRw6YE0B4okSWJYe8982k7rcj+vnuuyvSxV95w50Wcn4Cc44J/0AiSkfDpp0kwlmSJTlQTMwKsy1zXFzcYbtVmemOCxG/Wzk4Hc5wrKMC6Q8U=
                </pre>
            </uib-tab>
            <uib-tab index="request-tab-3" heading="Response parameters" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th><b>Parameters</b></th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><b>SerialNumber</b></td>
                                <td>string</td>
                                <td>Coupon serial number</td>
                            </tr>
                            <tr>
                                <td><b>CouponCode</b></td>
                                <td>string</td>
                                <td>16-digit coupon code</td>
                            </tr>
                            <tr>
                                <td><b>Value</b></td>
                                <td>decimal</td>
                                <td>Coupon value</td>
                            </tr>
                            <tr>
                                <td><b>ISOCurrencySymbol</b></td>
                                <td>string</td>
                                <td>Currency code by ISO 4217 (e.g. EUR)</td>
                            </tr>
                            <tr>
                                <td><b>Content</b></td>
                                <td>string</td>
                                <td>
                                    Base64 content in the format which was requested
                                </td>
                            </tr>
                            <tr>
                                <td><b>PartnerTransactionId</b></td>
                                <td>string</td>
                                <td>
                                    Identifier of the transaction in partner's system
                                </td>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request-tab-4" heading="200 OK Response example" classes="nav-item">
                <jsonformatter data="aBonGenerate.couponCreation.responseExample"></jsonformatter>
            </uib-tab>
            <uib-tab index="request-tab-5" heading="Error response messages" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-hover table-consendent">
                        <thead>
                            <tr>
                                <th>Http response</th>
                                <th>Description</th>
                                <th>Error Code</th>
                                <th>Message</th>
                                <th>Aditional data</th>
                                <th>Solution</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="6"><b>400</b></td>
                                <td rowspan="6">
                                    An invalid request was made. The response will contain an error code, message and optionally additionalData.
                                </td>
                                <td><b>1</b></td>
                                <td>Invalid PartnerId</td>
                                <td>-</td>
                                <td rowspan="6">
                                    The response will contain an error code,
                                    message and optionally additionalData.

                                </td>
                            </tr>
                            <tr>
                                <td><b>2</b></td>
                                <td>Invalid Signature</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>3</b></td>
                                <td>Invalid CouponValue</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>5</b></td>
                                <td>Invalid CurrencySymbol</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>6</b></td>
                                <td>Coupon exists for the given PartnerTransactionId</td>
                                <td>SerialNumber, Value, IsoCurrencySymbol, PartnerTransactionId</td>
                            </tr>
                            <tr>
                                <td><b>8</b></td>
                                <td>Daily limit exceeded</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>500</b></td>
                                <td>An unknown error occured</td>
                                <td>-</td>
                                <td>Unknown error has occurred</td>
                                <td>-</td>
                                <td>
                                    Contact Aircash support
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request-tab-6" heading="Error response example" classes="nav-item">
                <uib-tabset class="row tabs-left">
                    <uib-tab index="CreateTransactionError-tab-1" heading="4001" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4001)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4001.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8db69a48-7d61-48e7-9be8-3160549c7f17&PartnerTransactionId=e3bd6e90-cbb8-4118-a784-af3a93424a94&PointOfSaleId=test&Value=25
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4001)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4001.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4001">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4001">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4001)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CreateTransactionError-tab-2" heading="4002" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4002)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4002.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=&PartnerId=&PartnerTransactionId=&PointOfSaleId=&Value=0

                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4002)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4002.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4002">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4002">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4002)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CreateTransactionError-tab-3" heading="4003" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4003)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4003.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=62a6fdf7-967c-4152-9c79-8f144350b15b&PointOfSaleId=test&Value=11
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4003)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4003.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4003">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4003">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4003)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CreateTransactionError-tab-4" heading="4005" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4005)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4005.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUr&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=7770968f-22ab-42f0-8346-91e7ce6b12c5&PointOfSaleId=test&Value=25
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4005)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4005.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4005">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4005">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4005)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CreateTransactionError-tab-5" heading="4006" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4006)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4006.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=84ba908f-cef9-4713-9396-edad8f8c2c12&PointOfSaleId=test&Value=25

                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4006)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4006.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4006">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4006">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4006)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CreateTransactionError-tab-6" heading="4008" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCreateResponded && currentErrorCode == 4008)">
                                Request
                                <jsonformatter data="errorExamples.CreateTransaction.error4008.request"></jsonformatter>

                                Sequence:

                            </div>
                            <div class="col-sm-6" ng-if="!(errorCreateResponded && currentErrorCode == 4008)">
                                Response
                                <jsonformatter data="errorExamples.CreateTransaction.error4008.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCreateResponded && currentErrorCode == 4008">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCreateResponded && currentErrorCode == 4008">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="createSimulateError(4008)" ng-disabled="errorCreateServiceBusy">Request <i ng-if="errorCreateServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                </uib-tabset>
            </uib-tab>

            <uib-tab index="request-tab-7" heading="Try it out" classes="nav-item">
                <div class="row">
                    <div class="col-md-4">
                        <form action="/" method="POST" name="transactionForm0">
                            <fieldset>
                                <div class="mb-3">
                                    <label class="form-label" for="exampleInputPassword1">Value</label>
                                    <select class="form-control"
                                            ng-options="item for item in denominations"
                                            ng-model="createCouponModel.value" type="number" placeholder="Enter value" ng-disabled="createServiceBusy" ng-required="true">
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="exampleInputPassword1">PointOfSaleId</label>
                                    <input ng-model="createCouponModel.pointOfSaleId" class="form-control" type="text" placeholder="Enter PointOfSaleId" ng-disabled="createServiceBusy" ng-required="true">
                                </div>
                                <button ng-click="createCoupon()" class="btn btn-primary w-100px me-5px" ng-disabled="createServiceBusy || transactionForm0.$invalid">Create <i ng-if="createServiceBusy" class="fa fa-cog fa-spin"></i></button>
                            </fieldset>
                        </form>
                    </div>
                    <div class="col-md-4" ng-if="createServiceResponse">
                        Request ({{requestDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                        <jsonformatter data="serviceRequest"></jsonformatter>
                        Sequence: {{sequence}}<br />
                    </div>
                    <div class="col-md-4" ng-if="createServiceResponse">
                        Response ({{responseDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                        <jsonformatter data="serviceResponse"></jsonformatter>
                        <center><button href="" ng-click="showContent()" class="btn btn-primary w-100px me-5px">Preview</button></center>
                    </div>
                </div>
            </uib-tab>
        </uib-tabset>
    </div>
</div>

<h4 style="text-align:justify">Coupon cancellation</h4>

<div class="table-responsive">
    <table class="table table-active col-md-6">
        <thead>
            <tr>
                <th>Environment</th>
                <th>Method</th>
                <th>URL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Test</b></td>
                <td>
                    POST
                </td>
                <td>https://staging-a-bon.aircash.eu/rest/api/CashRegister/CancelCoupon</td>
            </tr>
            <tr>
                <td><b>Production</b></td>
                <td>
                    POST
                </td>
                <td>https://a-bon.aircash.eu/rest/api/CashRegister/CancelCoupon</td>
            </tr>
        </tbody>
    </table>
</div>
<br />
<p style="text-align:justify">
    This method is called on the cash register in case you need to cancel the coupon (cashier's mistake, the print failed, unpaid purchase etc.). This method is intended for on-premise cancellation, and can be called in a limited time interval after issuing the coupon. (e.g. 5 minutes).
    <br /> <br />
    Besides cancelling the coupon via CancelCoupon request, partner’s support will be able to cancel coupons via the BS portal that the Aircash will give credentials for. BS portal cancellation will not have a time interval expiry.
    <br /> <br />
    Authentication is done by checking the digital signature (Signature).
</p>


<div class="row">
    <div class="col-md-12">
        <uib-tabset>
            <uib-tab index="request1-tab-0" heading="Request parameters" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Parameters</th>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Mandatory</th>
                                <th>Part of the sequence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><b>PartnerId</b></td>
                                <td>string</td>
                                <td>Unique partner identifier (per currency) provided by Aircash</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>SerialNumber</b></td>
                                <td>string</td>
                                <td>
                                    Coupon serial number, while calling this method it is required to either set the SerialNumber or PartnerTransactionId
                                </td>
                                <td>YES, optional</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>PartnerTransactionId</b></td>
                                <td>string</td>
                                <td>
                                    Identifier of the transaction in partner's system, while calling this method it is required to either set the SerialNumber or PartnerTransactionId
                                </td>
                                <td>YES, optional</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>PointOfSaleId</b></td>
                                <td>string</td>
                                <td>Identifier of the point of sale</td>
                                <td>YES</td>
                                <td>YES</td>
                            </tr>
                            <tr>
                                <td><b>Signature</b></td>
                                <td>string</td>
                                <td>
                                    A sequence that has been digitally signed with the provider's private signature, used for authentication
                                </td>
                                <td>YES</td>
                                <td>NO</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request1-tab-1" heading="Request example" classes="nav-item">
                <jsonformatter data="aBonGenerate.couponCancellation.requestExample"></jsonformatter>
            </uib-tab>
            <uib-tab index="request-tab-2" heading="Signature" classes="nav-item">
<pre>
Request example:
</pre>
                <jsonformatter data="aBonGenerate.couponCancellation.requestExample"></jsonformatter>
<pre>
Sequence:
PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=76b266ae-4d61-414b-baa9-44f9da1182e1&PointOfSaleId=test&SerialNumber=9889251688979846

Signature:
XwTgMtFG/KgILmbLvRYMXrAXbkc9BZ37PuLsNG5aNMLXOIB+Ck1xcwZeK/UOuRWndTRp5xswW4V8XI9UpwAgGM3i/63EAUJx7QkpVj0ho8kZmU9QhPzARLhDPYwsI9tDeSbvXBing3HtkYPV5QG1XIzKn1giAtYIZfBHS96+Gnpoa0ox+d3Z4XzNuApVCRbzy4/PoQ5M2uDoxal/qwUTMzlrh9KY3XizB2hmZK131fNqt1d7FL61uPv5IjPRMfmtIIEqqAh6vudttN8yk4VwQVEwqHJGC2WHcPQngfSfaLe5PrxvSMgSWaJaSqN/QYvDm+NRUPqnd/oTOWXpRoY7iWdWGpCIOmVjLnAs6oF3laSdBe/3wB1fLUsRq5YqMmXT1LzotR3xTxXJ3kRHNg3eVMfm9PZsiPCnPc3R+9VUwT6qpYJqKG6AnGxUdfn7gWOTFpbQwMwvx4mNTWiv8GT83VJBRhi5hv21roM28f+7qO4TtMT519IWirvVobvBlWw4Gr1gIxkjnJ4CjZZ7JEKUOP6Zy+P5AQKo+bUV6V5/5TvEraeZypPfoDxUrEMZx/GnhilEIWpXyeC9H18Rx/pbBCA32wnRgoTOiJ9eHd95O14KqFlmzq9HgxIqWEUlE5QeIv8ulBTdrEJ9sGD9ceoQHtCZbQW6INMUqFmeEaZvn4g=                
</pre>
            </uib-tab>
            <uib-tab index="request1-tab-3" heading="Error response messages" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-hover table-consendent">
                        <thead>
                            <tr>
                                <th>Http response</th>
                                <th>Description</th>
                                <th>Error Code</th>
                                <th>Message</th>
                                <th>Aditional data</th>
                                <th>Solution</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="11"><b>400</b></td>
                                <td rowspan="11">
                                    An invalid request was made. The response will contain an error code, message and optionally additionalData.
                                </td>
                                <td><b>1</b></td>
                                <td>Invalid PartnerId</td>
                                <td>-</td>
                                <td rowspan="11">
                                    The response will contain an error code,
                                    message and optionally additionalData.

                                </td>
                            </tr>
                            <tr>
                                <td><b>2</b></td>
                                <td>Invalid Signature</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>3</b></td>
                                <td>Invalid PointOfSaleId</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>4</b></td>
                                <td>Invalid coupon serial number or partner transaction id</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>5</b></td>
                                <td>PartnerIds do not match</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>6</b></td>
                                <td>Point of sales Ids do not match</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>7</b></td>
                                <td>Coupon has been already canceled</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>8</b></td>
                                <td>Coupon has been already used</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>9</b></td>
                                <td>Coupon has already expired</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>10</b></td>
                                <td>Coupon cannot be cancelled (timeout expired)</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>11</b></td>
                                <td>Request failed</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td><b>500</b></td>
                                <td>An unknown error occured</td>
                                <td>-</td>
                                <td>Unknown error has occurred</td>
                                <td>-</td>
                                <td>
                                    Contact Aircash support
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request1-tab-4" heading="Error response example" classes="nav-item">
                <uib-tabset class="row tabs-left">
                    <uib-tab index="CancelTransactionError-tab-1" heading="4001" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4001)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4001.request"></jsonformatter>

                                Sequence:
                                PartnerId=8db69a48-7d61-48e7-9be8-3160549c7f17&PartnerTransactionId=3b591880-bf40-43d9-88ea-7818240f3863&PointOfSaleId=test&SerialNumber=5349550488532699
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4001)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4001.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4001">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4001">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4001)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-2" heading="4002" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4002)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4002.request"></jsonformatter>

                                Sequence:
                                PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=3b591880-bf40-43d9-88ea-7818240f3863&PointOfSaleId=test&SerialNumber=5349550488532699
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4002)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4002.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4002">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4002">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4002)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-3" heading="4003" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4003)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4003.request"></jsonformatter>

                                Sequence:
                                PartnerId=&PartnerTransactionId=&PointOfSaleId=&SerialNumber=
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4003)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4003.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4003">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4003">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4003)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-4" heading="4004" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4004)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4004.request"></jsonformatter>

                                Sequence:
                                PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=e2c643cf-e7c4-47ed-b989-39f76d54c218&PointOfSaleId=test&SerialNumber=0000000000000000
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4004)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4004.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4004">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4004">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4004)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-5" heading="4005" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4005)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4005.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=62a6fdf7-967c-4152-9c79-8f144350b15b&PointOfSaleId=test&Value=11
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4005)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4005.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4005">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4005">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4005)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-6" heading="4006" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4006)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4006.request"></jsonformatter>

                                Sequence:
                                PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=8bea4288-12c0-4fef-9149-f0a3cd5f807d&PointOfSaleId=error&SerialNumber=0565130009558536
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4006)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4006.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4006">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4006">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4006)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-7" heading="4007" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4007)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4007.request"></jsonformatter>

                                Sequence:
                                PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=319b700b-1700-458a-8c2d-cc2be039537a&PointOfSaleId=test&SerialNumber=0207037936248882
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4007)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4007.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4007">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4007">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4007)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-8" heading="4008" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4008)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4008.request"></jsonformatter>

                                Sequence:
                                PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=641795f3-1f0f-4e92-a988-3a5720f3c199&PointOfSaleId=test&SerialNumber=8111271745690701
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4008)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4008.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4008">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4008">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4008)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-9" heading="4009" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 4009)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error4009.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=62a6fdf7-967c-4152-9c79-8f144350b15b&PointOfSaleId=test&Value=11
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 4009)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error4009.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 4009">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 4009">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(4009)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-10" heading="40010" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 40010)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error40010.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=62a6fdf7-967c-4152-9c79-8f144350b15b&PointOfSaleId=test&Value=11
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 40010)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error40010.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 40010">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 40010">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(40010)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                    <uib-tab index="CancelTransactionError-tab-11" heading="40011" classes="nav-item">
                        <div class="row col-12">
                            <div class="col-sm-6 overflow-auto" ng-if="!(errorCancelResponded && currentErrorCode == 40011)">
                                Request
                                <jsonformatter data="errorExamples.CancelTransaction.error40011.request"></jsonformatter>

                                Sequence:
                                ContentType=&ContentWidth=&ISOCurrencySymbol=EUR&PartnerId=8f62c8f0-7155-4c0e-8ebe-cd9357cfd1bf&PartnerTransactionId=62a6fdf7-967c-4152-9c79-8f144350b15b&PointOfSaleId=test&Value=11
                            </div>
                            <div class="col-sm-6" ng-if="!(errorCancelResponded && currentErrorCode == 40011)">
                                Response
                                <jsonformatter data="errorExamples.CancelTransaction.error40011.response"></jsonformatter>
                            </div>
                            <div class="col-sm-6 overflow-auto" ng-if="errorCancelResponded && currentErrorCode == 40011">
                                Request ({{errorRequestDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorRequest"></jsonformatter>

                                Sequence: {{errorSequence}}<br />

                            </div>
                            <div class="col-sm-6" ng-if="errorCancelResponded && currentErrorCode == 40011">
                                Response ({{errorResponseDateTimeUTC| date:'yyyy-MM-dd HH:mm:ss.sss'}})
                                <jsonformatter data="errorResponse"></jsonformatter>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" ng-click="cancelSimulateError(40011)" ng-disabled="errorCancelServiceBusy">Request <i ng-if="errorCancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                    </uib-tab>
                </uib-tabset>
            </uib-tab>
            <uib-tab index="request1-tab-5" heading="Try it out" classes="nav-item">
                <div class="row">
                    <div class="col-md-4">
                        <form action="/" method="POST" name="transactionForm1">
                            <fieldset>
                                <div class="mb-3">
                                    <label class="form-label">Serial Number</label>
                                    <input ng-model="cancelCouponModel.cancelSerialNumber" class="form-control" type="text" placeholder="Enter SerialNumber" ng-disabled="cancelServiceBusy" ng-required="true">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="exampleInputPassword1">PointOfSaleId</label>
                                    <input ng-model="cancelCouponModel.cancelPointOfSaleId" class="form-control" type="text" placeholder="Enter PointOfSaleId" ng-disabled="cancelServiceBusy" ng-required="true">
                                </div>
                                <button ng-click="cancelCoupon()" class="btn btn-primary w-100px me-5px" ng-disabled="cancelServiceBusy || transactionForm1.$invalid">Cancel coupon <i ng-if="cancelServiceBusy" class="fa fa-cog fa-spin"></i></button>
                            </fieldset>
                        </form>
                    </div>
                    <div class="col-md-4" ng-if="cancelServiceResponse">
                        Request ({{cancelRequestDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})
                        <jsonformatter data="cancelServiceRequest"></jsonformatter>
                        Sequence: {{cancelSequence}}<br />
                    </div>
                    <div class="col-md-4" ng-if="cancelServiceResponse">
                        Response ({{cancelResponseDateTimeUTC | date:'yyyy-MM-dd HH:mm:ss.sss'}})<br />
                        <jsonformatter data="cancelResponse"></jsonformatter>
                    </div>
                </div>
            </uib-tab>
        </uib-tabset>
    </div>
</div>

<p>
    In case of successful cancellation, a HTTP 200 OK response message will be returned with an empty body.
</p>

<hr />

<h1 style="text-align:justify">Edge cases</h1>
<p style="text-align:justify">
    This chapter will describe possible edge cases that can happen while calling the API, and how to do error recovery. Edge cases include power outage on the cash register, temporary Internet unavailability, or temporary Abon service unavailability.
</p>
<h4 style="text-align:justify">CreateCoupon method – invalid or no response</h4>
<p style="text-align:justify">
    In the case of an unsuccessful CreateCoupon call, the following error recovery methods should be
    applied.
</p>
<ol>
    <li>
        Retry policy<br /> Possible when a partner sends an internal transaction identifier (PartnerTransactionId). If the method is called again with the same parameters (mandatory same PartnerTransactionId), and if it was not previously recorded on the Abon system, it will return the created coupon. If the coupon has been previously created and recorded on the Abon system, the return value will be error 6: "Coupon is for the given PartnerTransactionId". For security reasons, coupon content is only sent in the first response. Therefore, in order to recover from the error, first the CancelCoupon method with the same PartnerTransactionId has to be called. After successfully invoking the CancelCoupon method, it is possible to call CreateCoupon again with the same parameters (and the same PartnerTransactionId can be used).
    </li>
    <li>
        If a Partner does not send the PartnerTransactionId, it is not possible to recover from the error. In this case, it is necessary to call the method again with the same parameters. If the transaction was successful, coupon dana will be recorded on the Abon system. When a repeated call is made, a new coupon will be created in the system. Coupons created in the Abon system and not delivered to the Partner will be canceled in the periodic adjustment process.
    </li>
</ol>

<h4 style="text-align:justify">
    CreateCoupon method – response received
</h4>

<p style="text-align:justify">
    Partner takes over the responsibility of delivering the actual coupon paper to the buyer. When a coupon was successfully received from CreateCoupon method, but not delivered to the buyer (e.g. lack of paper in the printer), there are two scenarios possible.
</p>

<ol>
    <li>
        The Partner calls the CancelCoupon method with the serial number of the undelivered coupon (or with the PartnerTransactionId, if it was initially assigned). The coupon is then canceled in the Abon system and is not included in the reports (it is not subjected to periodic adjustment.) Partner then recalls the CreateCoupon method and creates a new coupon.
    </li>
    <li>
        The partner can cache the coupon in memory until the conditions to deliver the coupon are met (e.g. the paper in the printer was replaced)
    </li>
</ol>

<h4 style="text-align:justify">CancelCoupon method – invalid response</h4>
<p style="text-align:justify">
    The method supports repeated calls. The method can be called again with the same parameters in the case of an invalid response. In the event that the coupon was canceled by a previous call (whose response was not received), the return value contains the message 7: "Coupon has been already canceled".
</p>

<hr />

<h1 style="text-align:justify">Translations and EAN Codes</h1>

<div class="row">
    <div class="col-md-12">
        <uib-tabset>
            <uib-tab index="request2-tab-0" heading="Translations" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-active col-md-2">
                        <thead>
                            <tr>
                                <th>Language</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Croatian</td>
                                <td><a href="https://docs.google.com/document/d/1dURiUHNE05JrvXqpVKJU5zl3ePgDUnLL/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Czech</td>
                                <td><a href="https://docs.google.com/document/d/1yMDf7Sm81xRKz-PKP3mIuKvSxUmWicwi/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>English</td>
                                <td><a href="https://docs.google.com/document/d/1Rt7D_TKWki9j-oVR1yCVFIjOJkw7xd_4/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>French</td>
                                <td><a href="https://docs.google.com/document/d/1gbx_j5BYVoru-mB_6Nhsi-cl4IGqT-a-/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>German</td>
                                <td><a href="https://docs.google.com/document/d/1ic2R6JBSO3ay4LYF0W4UhsSLBl7mvhXl/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Greek</td>
                                <td><a href="https://docs.google.com/document/d/1TppZmq3F4nt2bQckPYlscU7_nI1Gja-f/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Italian</td>
                                <td><a href="https://docs.google.com/document/d/12I7EJRnOitn6OetzR5cYcmHUhZA9cdCR/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Polish</td>
                                <td><a href="https://docs.google.com/document/d/1IOdIvvW_c1gyAPMexKOTRH0xQBj_ThBP/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Romanian</td>
                                <td><a href="https://docs.google.com/document/d/1DHK0cQOvU6SzhBaoMCDsqGMGYGewciaU/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Slovak</td>
                                <td><a href="https://docs.google.com/document/d/1lya792DvvZAcLpxY0YxZg7pX-eRQJLZr/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Slovenian</td>
                                <td><a href="https://docs.google.com/document/d/1Rt7nC0kyZX5C9KsM8mMWXpqm1i_32Sod/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Spanish</td>
                                <td><a href="https://docs.google.com/document/d/12MKRRTuLkRiHmKqq2uVA2ZKr3Q8_f3jq/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
            <uib-tab index="request2-tab-1" heading="EAN Codes" classes="nav-item">
                <div class="table-responsive">
                    <table class="table table-active col-md-2">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Austria</td>
                                <td><a href="https://docs.google.com/document/d/1D08Xz7NG41KYJ-_Lz1FBJOGylcgMpeHt/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Croatia</td>
                                <td><a href="https://docs.google.com/document/d/19FYiS7SUqvGi9kyAH8iPNQFgZTXqbLEz/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Cyprus</td>
                                <td><a href="https://docs.google.com/document/d/1PT-gT2WRSlvabCwytmFarkQ7zKAVL3RS/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Czechia</td>
                                <td><a href="https://docs.google.com/document/d/16ufbMKdiPuhe4JykksjF0lg1e051zeVB/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Germany</td>
                                <td><a href="https://docs.google.com/document/d/1IsDcm-cnJHI23bdP5-ELucZ4sJQaikqd/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Greece</td>
                                <td><a href="https://docs.google.com/document/d/16YLUlO2JuMzGLACAOs_2iygfb5hAXkoJ/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Poland</td>
                                <td><a href="https://docs.google.com/document/d/15dsMtq8TvKJ1hCAiKDr0nM6eR075PSpw/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Romania</td>
                                <td><a href="https://docs.google.com/document/d/1olE1j0GxDTrgG9UL58gkIjAPXlcfWVBv/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Slovakia</td>
                                <td><a href="https://docs.google.com/document/d/18dwcN1HW3ydFCDdBJTSGWlFLM72XBDbM/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Slovenia</td>
                                <td><a href="https://docs.google.com/document/d/1vZwUm3QkJazxJAjj6eQHwXeBomvQxLnp/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Spain</td>
                                <td><a href="https://docs.google.com/document/d/1M3bfqMIxktqQBCDvJNhfuZ2J3Lj1YBQx/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                            <tr>
                                <td>Switzerland</td>
                                <td><a href="https://docs.google.com/document/d/1Lj_H0QC95w9BZ-NiuufH60ZHa1jB81gj/edit?usp=share_link&ouid=110553381833413652820&rtpof=true&sd=true" target="_blank">Link</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>
        </uib-tabset>
    </div>
</div>

<hr />

<h1>FAQ</h1>

<br />

<div class="table-responsive">
    <table class="table table-active">
        <tr>
            <td rowspan="2">1.</td>
            <td>
                <b>Q:&nbsp; What is behind QR code itself?</b><br />
            </td>
        </tr>
        <tr>
            <td><b>A:</b>&nbsp; Behind the QR code is the 16-digit coupon code that does not contain any spaces or dashes between the numbers.</td>
        </tr>
        <tr>
            <td rowspan="2">2.</td>
            <td><b>Q:&nbsp; What are available denominations?</b></td>
        </tr>
        <tr>
            <td><b>A:</b>&nbsp; 5, 10, 20, 25, 50 EUR</td>
        </tr>
        <tr>
            <td rowspan="2">3.</td>
            <td><b>Q:&nbsp; Is there a limit of the total amount of issued Abon per location?</b></td>
        </tr>
        <tr>
            <td><b>A:</b>&nbsp; Yes, the limit can be configurable per location and it depends on agreement between us and you.</td>
        </tr>
        <tr>
            <td rowspan="2">4.</td>
            <td><b>Q:&nbsp;  What is the timeframe within which Abon can be cancelled?</b></td>
        </tr>
        <tr>
            <td><b>A:</b>&nbsp; Usually that is within 5 minutes from the time it is issued.</td>
        </tr>
        <tr>
            <td rowspan="2">5.</td>
            <td><b>Q:&nbsp; What if the user tries to return his Abon that is already used?</b></td>
        </tr>
        <tr>
            <td><b>A:</b>&nbsp; On cashier an error will appear with a message that says that the Coupon has been already used.</td>
        </tr>
    </table>
</div>



<!-- #modal-dialog -->
<div class="modal fade" id="couponModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Abon example</h4>
            </div>
            <div class="modal-body" align="center">
                <img src="../../images/abon.png" alt="Abon">
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" data-dismiss="modal">Close</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="contentModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Abon preview</h4>
            </div>
            <div class="modal-body" id="content1">
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-white" data-dismiss="modal">Close</a>
            </div>
        </div>
    </div>
</div>


